<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Homework 4 Bon Crowder</title>
    <!-- <link rel="stylesheet" href="reset.css"> -->
    <!-- <link rel="stylesheet" href="starter.css"> -->
    <script src="https://use.fontawesome.com/d2644d9941.js"></script>
    <!-- jQuery library -->
    <script src="https://code.jquery.com/jquery-3.1.1.js"></script>
    <!-- Latest compiled and minified CSS for bootstrap -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
  </head>
  <body>

  <div class="container">
    <div class="row">
        <div class="col-xs-12">
          <h1>Are you ready to run across Texas?</h1>

          <p>You have four runners, shown below. By clicking on a runner, you will “run” a specific amount of miles of your race.</p>

          <p>Your team wins the race by running EXACTLY the right amount of miles.</p>

          <p>Your team loses if you get lost and run more miles than the amount of the race.</p>

          <p>The amount of miles each runner can run is hidden from you - so you have to use strategy and deduction to get your team across the finish line with just the right number of miles.</p>

          <p>When you run a new race, each of your runners will have a different number of miles they can run.</p>

          <h1>Your team has <span id="winCount">0</span> wins and <span id="lossCount">0</span> losses.</h1>

          <h1>Click on a team member to start running!</h1>
          </div>
    </div>

    <!-- Runner Panel -->
        <div class="row">
            <div class="col-xs-6 col-sm-3">
              <button id="silvia" class="btn btn-primary runner" value="Silvia"><img src="assets/images/MGRR-Silvia.jpg"></button>
              <br>
              <!-- Total Legs of the Race: <span id="silviaLegs"></span> -->
            </div>
            <div class="col-xs-6 col-sm-3">
              <button id="rocio" class="btn btn-danger runner" value="Rocio"><img src="assets/images/MGRR-Rocio.jpg"></button>
              <br>
              <!-- Total Legs of the Race: <span id="rocioLegs"></span> -->
            </div>
            <div class="col-xs-6 col-sm-3">
              <button id="lauro" class="btn btn-default runner" value="Lauro"><img src="assets/images/MGRR-Lauro.jpg"></button>
              <br>
              <!-- Total Legs of the Race: <span id="lauroLegs"></span> -->
            </div>
            <div class="col-xs-6 col-sm-3">
              <button id="randy" class="btn btn-primary runner" value="Randy"><img src="assets/images/MGRR-Randy.jpg"></button>
              <br>
              <!-- Total Legs of the Race: <span id="randyLegs"></span> -->
            </div>
        </div>
    </div>

    <div class="container">
    <div class="row">
        <div class="col-lg-12">
          <h2>The race is <span id="milesInRaceWords">0</span> miles long.</h2>
          <h2> Your team has <span id="milesToRunWords"></span> more miles to run!</h2>
          </div>
        <div class="col-xs-2 col-sm-3 col-md-4 col-lg-5"></div>
    </div>
</div>

<script>
  $(document).ready(function(){
    // the instructions require a random number "between 19 - 120"
    // the variable milesToRun gives a number x, such that 20 <= x <= 119,
    // which is equivalent to a number x such that 19 < x < 120.
    var milesToRun = 0;

    var objectSilvia = {
      objType: "person",
      name: "Silvia",
      objDescriptor: "Silvia's info ... ",
      legsRan: 0,
      distance: 0,
      showInfo: function() {
        console.log(this.objDescriptor + this.distance);
      }
    };

    var objectRocio = {
      objType: "person",
      name: "Rocio",
      objDescriptor: "Rocio's info ... ",
      legsRan: 0,
      distance: 0,
      showInfo: function() {
        console.log(this.objDescriptor + this.distance);
      }
    };

    var objectLauro = {
      objType: "person",
      name: "Lauro",
      objDescriptor: "Lauro's info ... ",
      legsRan: 0,
      distance: 0,
      showInfo: function() {
        console.log(this.objDescriptor + this.distance);
      }
    };

    var objectRandy = {
      objType: "person",
      name: "Randy",
      objDescriptor: "Randy's info ... ",
      legsRan: 0,
      distance: 0,
      showInfo: function() {
        console.log(this.objDescriptor + this.distance);
      }
    };

    objectSilvia.showInfo();
    objectRocio.showInfo();
    objectLauro.showInfo();
    objectRandy.showInfo();

    var objectMgrr = {
      objType: "team",
      name: "Meet, Greet, Run, Repeat",
      racesFinished: 0,
      racesUnFinished: 0,
      winARace: function() {
        this.racesFinished += 1;
        $("#winCount").html(this.racesFinished);
      },
      loseARace: function(){
        this.racesUnFinished +=1;
        $("#lossCount").html(this.racesUnFinished);
      }
    }
      // announcing the next race (only after the first is finished)
      var almostTimeForRace = function() {
        $("#milesToRunWords").html("<h2>It's about time for the next race...</h2>");
      }
      // starting the race and initializing the variables
      var startTheRace = function() {
        // miles in the race
        milesToRun = Math.floor((Math.random()*100))+20;

        // distances for runners
        objectSilvia.distance = Math.floor((Math.random()*100)%12)+1;
        objectRocio.distance = Math.floor((Math.random()*100)%12)+1;
        objectLauro.distance = Math.floor((Math.random()*100)%12)+1;
        objectRandy.distance = Math.floor((Math.random()*100)%12)+1;

        // for testing, we can see the actual miles in the console #cheeter
        objectSilvia.showInfo();
        objectRocio.showInfo();
        objectLauro.showInfo();
        objectRandy.showInfo();

        // the words for the miles to run and the miles left
        $("#milesInRaceWords").html(milesToRun);

        $("#milesToRunWords").html(milesToRun);
      };

      // start the race!
      startTheRace();

      // runner buttons and their handling
      $("button.runner").click(function() {

        // what to do if the player clicked on Silvia
        if (this.value === "Silvia") {
          // reduce the miles by runner's distance
          milesToRun -= objectSilvia.distance;

            // if we crossed the finish line,
            if (milesToRun === 0) {

              // announce the win
              $("#milesToRunWords").html("<h2>" + objectSilvia.name + " crossed the finish line for your team!</h2>");

              // flip counter for the wins column
              objectMgrr.winARace();

              // start the race over, but only after giving the warnings
              setTimeout(almostTimeForRace, 3000);
              setTimeout(startTheRace, 6000);
            }
            // if we ran too far,
            else if (milesToRun < 0) {

              // Show the miles we went over
              $("#milesToRunWords").html("<h2>Your team ran " + - milesToRun + " too many miles. " + objectSilvia.name + " must have gotten lost!</h2>");

              // flip counter for the losses column
              objectMgrr.loseARace();

              // start the race over, but only after giving the warnings
              setTimeout(almostTimeForRace, 3000);
              setTimeout(startTheRace, 6000);
            }
            // continuing if we haven't won or lost
            else {
              $("#milesToRunWords").html("<h2>Your team has " + milesToRun + " more miles to run!</h2>");
            }
        }
        // what to do if the player clicked on Rocio
        else if (this.value === "Rocio") {
          // reduce the miles by runner's distance
          milesToRun -= objectRocio.distance;

          // if we crossed the finish line,
          if (milesToRun === 0) {

            // announce the win
            $("#milesToRunWords").html("<h2>" + objectRocio.name + " crossed the finish line for your team!</h2>");

            // flip counter for the wins column
            objectMgrr.winARace();

            // start the race over, but only after giving the warnings
            setTimeout(almostTimeForRace, 3000);
            setTimeout(startTheRace, 6000);
          }
          // if we ran too far,
          else if (milesToRun < 0) {

            // Show the miles we went over
            $("#milesToRunWords").html("<h2>Your team ran " + - milesToRun + " too many miles. " + objectRocio.name + " must have gotten lost!</h2>");

            // flip counter for the losses column
            objectMgrr.loseARace();

            // start the race over, but only after giving the warnings
            setTimeout(almostTimeForRace, 3000);
            setTimeout(startTheRace, 6000);
          }
          // continuing if we haven't won or lost
          else {
            $("#milesToRunWords").html("<h2>Your team has " + milesToRun + " more miles to run!</h2>");
          }
        }
        // what to do if the player clicked on Lauro
        else if (this.value === "Lauro") {
          // reduce the miles by runner's distance
          milesToRun -= objectLauro.distance;

          // if we crossed the finish line,
          if (milesToRun === 0) {

            // announce the win
            $("#milesToRunWords").html("<h2>" + objectLauro.name + " crossed the finish line for your team!</h2>");

            // flip counter for the wins column
            objectMgrr.winARace();

            // start the race over, but only after giving the warnings
            setTimeout(almostTimeForRace, 3000);
            setTimeout(startTheRace, 6000);
          }
          // if we ran too far,
          else if (milesToRun < 0) {

            // Show the miles we went over
            $("#milesToRunWords").html("<h2>Your team ran " + - milesToRun + " too many miles. " + objectLauro.name + " must have gotten lost!</h2>");

            // flip counter for the losses column
            objectMgrr.loseARace();

            // start the race over, but only after giving the warnings
            setTimeout(almostTimeForRace, 3000);
            setTimeout(startTheRace, 6000);
          }
          // continuing if we haven't won or lost
          else {
            $("#milesToRunWords").html("<h2>Your team has " + milesToRun + " more miles to run!</h2>");
          }

        }
        // what to do if the player clicked on Randy
        else if (this.value === "Randy") {
          // reduce the miles by runner's distance
          milesToRun -= objectRandy.distance;

          // if we crossed the finish line,
          if (milesToRun === 0) {

            // announce the win
            $("#milesToRunWords").html("<h2>" + objectRandy.name + " crossed the finish line for your team!</h2>");

            // flip counter for the wins column
            objectMgrr.winARace();

            // start the race over, but only after giving the warnings
            setTimeout(almostTimeForRace, 3000);
            setTimeout(startTheRace, 6000);
          }
          // if we ran too far,
          else if (milesToRun < 0) {

            // Show the miles we went over
            $("#milesToRunWords").html("<h2>Your team ran " + - milesToRun + " too many miles. " + objectRandy.name + " must have gotten lost!</h2>");

            // flip counter for the losses column
            objectMgrr.loseARace();

            // start the race over, but only after giving the warnings
            setTimeout(almostTimeForRace, 3000);
            setTimeout(startTheRace, 6000);
          }
          // continuing if we haven't won or lost
          else {
            $("#milesToRunWords").html("<h2>Your team has " + milesToRun + " more miles to run!</h2>");
          }
        }
      });
    });
</script>


  </body>
</html>
